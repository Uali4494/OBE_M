<div class="modal-section" style="position: initial;overflow-y:hidden">
  <div class="modal fade modal-wide margin-t41" id="Assessment_Marks_Obtained_Details" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <div class="section-heading">
            <h2 class="pull-left">Assessment Marks Obtained Details ( {{this.Name}} - {{this.Enrollment}} )</h2>
            <div class="pull-right">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="app-icon-IconSet-1-12"></i></button>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="modal-body">
          <fieldset class="margin-b15">
            <legend>Assessment Marks Obtained Details</legend>
            <div class="alert alert-info" *ngIf="Assessment_Marks_Details?.length > 0">
              <p>Assessment Type: <b>{{Assessment_Type}}</b></p>
              <p>Obtained Marks: <b>{{Assessment_Obtained_Marks}}</b></p>
              <p>Total Marks: <b>{{Assessment_Total_Marks}}</b></p>
              <p>Attainment: <b>{{Assessment_Percentage}}%</b></p>
            </div>
            <div class="table-responsive" style="height: 55vh;overflow-y: auto;">
              <table class="table table-hover table-theme margin-b30" *ngIf="Assessment_Marks_Details?.length > 0">
                <thead>
                  <tr>
                    <th>Sr.</th>
                    <th>Title</th>
                    <th>Assessment Details</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="cursor-pointer" *ngFor="let i of Assessment_Marks_Details; let idx = index">
                    <td align="center">{{idx+1}}</td>
                    <td><b class="blue"> <span [innerHTML]="i.Assessment_Title"></span></b><p>Total Marks: <b><span [innerHTML]="i.Assessment_Marks"></span></b></p></td>
                    <ng-container *ngIf="i.Is_Course">
                      <td *ngIf="i.Is_Multiple">
                        <ng-container *ngFor="let j of i.Question_Number; let idx=index">
                          <b class="blue">Question: <span [innerHTML]="j"></span></b><p>Question Marks: <b><span [innerHTML]="i.Question_Marks[idx]"></span></b> | Obtained Marks: <b><span [innerHTML]="i.Obtained_Marks[idx]"></span></b> | Mapped CLO: <b><span [innerHTML]="i.CLO_Title[idx]"></span></b> | Weightage: <b><span [innerHTML]="i.Weightage[idx]"></span>%</b></p>
                        </ng-container>
                      </td>
                      <td *ngIf="!i.Is_Multiple">
                        <b class="blue">Question: <span [innerHTML]="i.Question_Number"></span></b><p>Question Marks: <b><span [innerHTML]="i.Question_Marks"></span></b> | Obtained Marks: <b><span [innerHTML]="i.Obtained_Marks"></span></b> | Mapped CLO: <b><span [innerHTML]="i.CLO_Title"></span></b> | Weightage: <b><span [innerHTML]="i.Weightage"></span>%</b></p>
                      </td>
                    </ng-container>
                    <ng-container *ngIf="!i.Is_Course">
                      <td *ngIf="i.Is_Multiple">
                        <ng-container *ngFor="let j of i.Question_Number; let idx=index">
                          <b class="blue"><span [innerHTML]="j"></span></b><p>Rubrics Marks: <b><span [innerHTML]="i.Question_Marks[idx]"></span></b> | Obtained Marks: <b><span [innerHTML]="i.Obtained_Marks[idx]"></span></b> | Mapped CLO: <b><span [innerHTML]="i.CLO_Title[idx]"></span></b> | Weightage: <b><span [innerHTML]="i.Weightage[idx]"></span>%</b></p>
                        </ng-container>
                      </td>
                      <td *ngIf="!i.Is_Multiple">
                        <b class="blue"><span [innerHTML]="i.Question_Number"></span></b><p>Rubrics Marks: <b><span [innerHTML]="i.Question_Marks"></span></b> | Obtained Marks: <b><span [innerHTML]="i.Obtained_Marks"></span></b> | Mapped CLO: <b><span [innerHTML]="i.CLO_Title"></span></b> | Weightage: <b><span [innerHTML]="i.Weightage"></span>%</b></p>
                      </td>
                    </ng-container>
                  </tr>
                </tbody>
              </table>
              <ng-container *ngFor="let i of Assessment_CLO_Details">
                <div class="alert alert-info" *ngIf="Assessment_CLO_Details?.length > 0">
                  <p>Assessment Type: <b>{{i.CLO_Title}}</b>    Attainment: <b>{{i.CLO_Attainment}}</b>    Obtained Marks: <b>{{i.CLO_Obtained_Marks}}</b>    Total Marks: <b>{{i.CLO_Total_Marks}}</b></p>
                  <p>Weightaged Obtained Marks: <b>{{i.CLO_Weightaged_Obtained_Marks}}</b>    CLO Total Weightaged_Marks: <b>{{i.CLO_Total_Weightaged_Marks}}</b></p>
                </div>
                <table class="table table-hover table-theme margin-b30" *ngIf="Assessment_CLO_Details?.length > 0">

                  <thead>
                    <tr>
                      <th>Sr.</th>
                      <th>CLO Title</th>
                      <th>Assessment Title</th>
                      <th>Assessment Details</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="cursor-pointer" *ngFor="let j of i.CLO_Details; let idx = index">
                      <td align="center">{{idx+1}}</td>
                      <td><b class="blue"> <span [innerHTML]="j.CLOTitle"></span></b></td>
                      <td><b class="blue"> <span [innerHTML]="j.AssessmentTitle"></span></b></td>
                      <td>
                        <b class="blue"><span [innerHTML]="j.QuestionNumberOrPerformanceIndicator"></span></b><p>Marks: <b><span [innerHTML]="j.QuestionMarks"></span></b> | Obtained Marks: <b><span [innerHTML]="j.ObtainedMarks"></span></b> | Weightage: <b><span [innerHTML]="j.Weightage"></span>%</b></p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </ng-container>
            </div>
          </fieldset>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
</div>
<div class="section-heading"><h2>Compiled Result</h2></div>
<div class="margin-b15">
  <div class="row">
    <div class="col-sm-12">
      <fieldset class="padding-b5">
        <legend>Criteria</legend>
        <div class="row">
          <div class="form-group col-sm-2">
            <label class="control-label">Select Institute <span class="text-danger">*</span></label>
            <select class="form-control" (change)="Get_Department($event.target.value)" [ngModel]="Temp_Institute_ID" [attr.disabled]="Temp_Institute_ID != 0  ? 'disabled' : null">
              <option value="0">Select Institute</option>
              <option value="{{i.InstituteID}}" *ngFor="let i of Institutes">{{i.InstituteShortName}}</option>
            </select>
          </div>
          <div class="form-group col-sm-2">
            <label class="control-label">Select Department <span class="text-danger">*</span></label>
            <select class="form-control" id="DepartmentID" [ngModel]="Temp_Deaprtment_ID" [attr.disabled]="Temp_Deaprtment_ID != 0  ? 'disabled' : null">
              <option value="0">Select Deparment</option>
              <option value="{{i.DepartmentID}}" *ngFor="let i of Department">{{i.DepartmentName}}</option>
            </select>
          </div>
          <div class="form-group col-sm-2">
            <label class="control-label">Select Semester <span class="text-danger">*</span></label>
            <select class="form-control" id="SemesterID" (change)="Get_FacultyMembers($event.target.value)">
              <option value="0">Select Semester</option>
              <option value="{{i.SemesterID}}" *ngFor="let i of All_Semester">{{i.semesterAlia}}</option>
            </select>
          </div>

          <div class="form-group col-sm-2">
            <label class="control-label">Select Faculty<span class="text-danger">*</span></label>
            <select class="form-control" id="FacultyID" (change)="Get_AssignedCourse($event.target.value)" [ngModel]="Temp_FacultyMember_ID" [attr.disabled]="Temp_FacultyMember_ID != 0  ? 'disabled' : null">
              <option value="0">Select Faculty</option>
              <option value="{{i.FacultyMemberID}}" *ngFor="let i of Faculty">{{i.Name}}</option>
            </select>
          </div>
          <div class="form-group col-sm-2">
            <label class="control-label">Select Course<span class="text-danger">*</span></label>
            <select class="form-control" id="OfferedCourseID">
              <option value="0">Select Course</option>
              <option value="{{i.OfferedCourseID}}" *ngFor="let i of AssignedCourse_Request_lst" title="{{i.Title}}">{{i.Course_Alias}}</option>
            </select>
          </div>


          <div class="col-sm-1 margin-t17">
            <button class="btn btn-info" (click)="Get_All_Student_And_Grades()">Search</button>
          </div>

        </div>
      </fieldset>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-sm-12">
    <fieldset class="margin-b15">
      <legend>Summary</legend>
      <div class="col-sm-12">
        <div id="CourseAttainment" style="height: 150px"></div>
      </div>

    </fieldset>
  </div>
</div>
<div class="margin-b5">
  <div class="pull-left">
    <div class="has-feedback width-300">
      <input type="text" class="form-control" placeholder="Search Records" [(ngModel)]="query">
      <span class="form-control-feedback"><i class="app-icon-IconSet-1-92"></i></span>
    </div>
  </div>
  <div class="pull-left margin-l5">
    <div class="form-inline">
      <div class="form-group margin-r10" style="width:110%">
        <label class="control-label margin-r10">Show</label>
        <select class="form-control input-xs margin-r5" (change)="setPage(1,pagesize)" [(ngModel)]="pagesize" style="width: 30%;">
          <option>10</option>
          <option>20</option>
          <option>30</option>
          <option>50</option>
          <option>100</option>
        </select>
        <label class="control-label">Per Page</label>
      </div>
    </div>
  </div>
  <div class="pull-left margin-t5">
    <ul class="nav nav-pills margin-l20">
      <li class="margin-r15"><span class="fa fa-stop text-success"></span> Passed</li>
      <li class="margin-r15"><span class="fa fa-stop text-danger"></span> Failed</li>
    </ul>
  </div>
  <div class="pull-right" *ngIf="this.CourseCategory!=0">
    <div class="btn-group left-dropdown">
      <button class="btn btn-default btn-sm dropdown-toggle margin-r5" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Export <span class="caret"></span> </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
        <li><a (click)="DownloadExcel()">Excel</a></li>
      </ul>
    </div>
  </div>
  <div class="clearfix"></div>
</div>
<div class="table-responsive" style="max-height: 38vh;overflow-y:auto">
  <table class="table table-hover table-theme">
    <thead>
      <tr *ngIf="CourseCategory==1 || CourseCategory==4">
        <th>Sr. #</th>
        <th>Name / Enrollment</th>
        <th *ngIf="CourseCategory==1">Assignments</th>
        <th *ngIf="CourseCategory==4">Assessment</th>
        <th *ngIf="CourseCategory==1">Quizzes</th>
        <th *ngIf="CourseCategory==4">Journals</th>
        <th>Mids</th>
        <th>Finals</th>
        <th>Total</th>
        <th>Grade</th>
        <th>Course CLOs</th>
        <th>CLOs %</th>
        <th>Action</th>
      </tr>
      <tr *ngIf="CourseCategory==8">
        <th>Sr. #</th>
        <th>Name / Enrollment</th>
        <th>FYP Coordinator</th>
        <th>FYP Supervisor</th>
        <th>Initial Presentation</th>
        <th>Mid-Term Presentation</th>
        <th>Final Presentation</th>
        <th>Total</th>
        <th>Grade</th>
        <th>Course CLOs</th>
        <th>CLOs %</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody *ngIf="CourseCategory==1||CourseCategory==4">
      <ng-container *ngFor="let i of All_student_Result | filter:query; let idx=index">
        <tr [ngClass]="[(i.Grade =='F')?'tr-danger':'', (i.Grade !='F')?'tr-success':'']">
          <td align="center">{{idx+1}}</td>
          <td><b class="blue"><span [innerHTML]="i.Name | highlight:query"></span></b><p><span [innerHTML]="i.Enrollment | highlight:query"></span></p></td>
          <td align="center"><a (click)="ShowAssessmentDetails(CourseCategory==1?'Assignment':'Assessment',i)" class="underline"><b class="blue"><span [innerHTML]="i.Assignmnet_Marks | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails(CourseCategory==1?'Quiz':'Journal',i)" class="underline"><b class="blue"><span [innerHTML]="i.Quiz_Marks | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('Mids',i)" class="underline"><b class="blue"><span [innerHTML]="i.Mid_Marks | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('Finals',i)" class="underline"><b class="blue"><span [innerHTML]="i.Final_Marks | highlight:query"></span></b></a></td>
          <td align="center"><a href="javascript:void(0)" class="underline"><b class="blue"><span [innerHTML]="i.Total | highlight:query"></span></b></a></td>
          <td align="center"><a href="javascript:void(0)"><b class="blue"><span [innerHTML]="i.Grade | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('CLO',i)"><b class="blue underline"><span [innerHTML]="i.Clo_Name | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('CLO',i)"><b class="blue underline"><span [innerHTML]="i.Clo_Result | highlight:query"></span></b></a></td>
          <td align="center" style="width: 2%;">
            <button type="button" (click)="DeleteStudent(i)" class="btn btn-default margin-r5" title="Delete Assessment"><i class="app-icon-IconSet-1-33 f12 blue"></i> </button>
          </td>
        </tr>
      </ng-container>

    </tbody>
    <tbody *ngIf="CourseCategory==8">
      <ng-container *ngFor="let i of All_student_Result | filter:query; let idx=index">
        <tr [ngClass]="[(i.Grade =='F')?'tr-danger':'', (i.Grade !='F')?'tr-success':'']">
          <td align="center">{{idx+1}}</td>
          <td><b class="blue"><span [innerHTML]="i.Name | highlight:query"></span></b><p><span [innerHTML]="i.Enrollment | highlight:query"></span></p></td>
          <td align="center"><a class="underline"><b class="blue"><span [innerHTML]="i.FYPCoordinatorObtainedMarks | highlight:query"></span></b></a></td>
          <td align="center"><a class="underline"><b class="blue"><span [innerHTML]="i.FYPSupervisorObtainedMarks | highlight:query"></span></b></a></td>
          <td align="center"><a class="underline"><b class="blue"><span [innerHTML]="i.InitialPresentationObtainedMarks | highlight:query"></span></b></a></td>
          <td align="center"><a class="underline"><b class="blue"><span [innerHTML]="i.MidTermPresentationObtainedMarks | highlight:query"></span></b></a></td>
          <td align="center"><a class="underline"><b class="blue"><span [innerHTML]="i.FinalPresentationObtainedMarks | highlight:query"></span></b></a></td>
          <td align="center"><a href="javascript:void(0)" class="underline"><b class="blue"><span [innerHTML]="i.Total | highlight:query"></span></b></a></td>
          <td align="center"><a href="javascript:void(0)"><b class="blue"><span [innerHTML]="i.Grade | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('CLO',i)"><b class="blue underline"><span [innerHTML]="i.Clo_Name | highlight:query"></span></b></a></td>
          <td align="center"><a (click)="ShowAssessmentDetails('CLO',i)"><b class="blue underline"><span [innerHTML]="i.Clo_Result | highlight:query"></span></b></a></td>
          <td align="center" style="width: 2%;">
            <button type="button" (click)="DeleteStudent(i)" class="btn btn-default margin-r5" title="Delete Assessment"><i class="app-icon-IconSet-1-33 f12 blue"></i> </button>
          </td>
        </tr>
      </ng-container>

    </tbody>
  </table>
</div>
<div class="pagination-bottom">
  <div class="pull-left">
    <div class="form-inline">
      <div class="form-group" *ngIf="All_student_Result==null || All_student_Result?.length == 0">
        <label class="control-label padding-t5">Showing 0 to 0 of 0 entries</label>
      </div>
      <div class="form-group" *ngIf="All_student_Result?.length >=1">
        <label class="control-label padding-t5">Showing {{pager?.startIndex+1}} to {{pager?.endIndex+1}} of {{pager?.totalItems}} entries</label>
      </div>
    </div>
  </div>
  <div class="form-inline pull-right margin-b5">
    <div class="table-pagination pull-right" *ngIf="pager?.pages && pager?.pages.length">
      <button data-original-title="First Page" title="" class="btn btn-default" [ngClass]="{disabled:pager?.currentPage === 1}" (click)="setPage(1,pagesize)" [disabled]="pager?.currentPage === 1"><i class="fa fa-backward"></i></button>
      <button data-original-title="Previous" title="" class="btn btn-default" [ngClass]="{disabled:pager?.currentPage === 1}" (click)="setPage(pager?.currentPage - 1,pagesize)" [disabled]="pager?.currentPage === 1"><i class="fa fa-caret-left"></i></button>
      <input type="text" style="width:50px;" value="1" class="form-control" [(ngModel)]="page" (keyup)="setPage(page)" (keypress)="keyRestrict($event,'0123456789')" disabled>
      <label class="control-label">of  {{pager?.totalPages}}</label>
      <button data-original-title="Next" title="" class="btn btn-default" [ngClass]="{disabled:pager?.currentPage === pager?.totalPages}" (click)="setPage(pager?.currentPage + 1,pagesize)" [disabled]="pager?.currentPage == pager?.totalPages"><i class="fa fa-caret-right"></i></button>
      <button data-original-title="Last" title="" class="btn btn-default" [ngClass]="{disabled:pager?.currentPage === pager?.totalPages}" (click)="setPage(pager?.totalPages,pagesize)" [disabled]="pager?.currentPage == pager?.totalPages"><i class="fa fa-forward"></i></button>
    </div>
  </div>
  <div class="clearfix"></div>
</div>
